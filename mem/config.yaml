# Mem Configuration Example

database:
  path: /data/db/mem.duckdb

sttd:
  host: "mem-sttd"   # STTD server host (use 127.0.0.1 for local, mem-sttd for docker)
  port: 8765         # STTD server port
  timeout: 300.0     # Request timeout in seconds

capture:
  frame:
    interval_seconds: 5
    jpeg_quality: 85
    enable_deduplication: true
    similarity_threshold: 100.0
  audio:
    chunk_duration_seconds: 60   # Smaller chunks for better accuracy
    overlap_seconds: 5           # Overlap to prevent word cutoffs
    sample_rate: 16000

files:
  filename_format: YYYY-MM-DD_HH-MM-SS
  filename_regex: ^(\d{4})-(\d{2})-(\d{2})_(\d{2})-(\d{2})-(\d{2})$

api:
  host: 0.0.0.0
  port: 8000
  max_upload_size: 5368709120  # 5GB
  default_time_range_days: 1

streaming:
  rtmp:
    enabled: true
    host: localhost  # External hostname for RTMP URLs (override with RTMP_HOST env var)
    port: 1935
    max_concurrent_streams: 10
  capture:
    frame_interval_seconds: 1  # More frequent for live streams
    buffer_size: 30  # seconds of buffer
    max_frame_width: 7680  # 8K max (safety limit)
    max_frame_height: 4320  # 8K max (safety limit)
  auth:
    require_stream_key: true

logging:
  level: INFO
  debug_level: DEBUG
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"